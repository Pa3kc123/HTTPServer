{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "check dir tree",
            "type": "shell",
            "windows": {
                "options": {
                    "cwd": "${workspaceFolder}\\bin"
                },
                "args": [
                    "@IF NOT EXIST production (mkdir production)",
                    "@IF NOT EXIST headers (mkdir headers)",
                    "@IF NOT EXIST native (mkdir native)"
                ]
            },
            "linux": {
                "options": {
                    "cwd": "${workspaceFolder}\\bin"
                },
                "args": [
                    "echo fail"
                ]
            }
        },
        {
            "label": "extract jars",
            "type": "shell",
            "command": "jar",
            "windows": {
                "options": {
                    "cwd": "${workspaceFolder}\\bin\\production"
                },
                "args": [
                    "-fx",
                    "..\\..\\lib\\MyLibrary.jar"
                ]
            },
            "linux": {
                "options": {
                    "cwd": "${workspaceFolder}/bin/production"
                },
                "args": [
                    "-fx",
                    "../../lib/MyLibrary.jar"
                ]
            },
            "dependsOn": [
                "check dir tree"
            ],
            "problemMatcher": []
        },
        {
            "label": "build project",
            "type": "shell",
            "command": "javac",
            "windows": {
                "args": [
                    "-d", "bin\\production",
                    "-h", "bin\\production\\headers",
                    "-classpath", "bin\\production",
                    "-bootclasspath", "${env:JAVA_HOME}\\jre\\lib\\rt.jar",
                    "-sourcepath", "src",
                    "-source", "1.6",
                    "-target", "1.6",
                    "src\\sk\\pa3kc\\*.java",
                    "src\\sk\\pa3kc\\http\\*.java",
                    "src\\sk\\pa3kc\\http\\constants\\*.java"
                ]
            },
            "linux": {
                "args": [
                    "-d", "bin/production",
                    "-h", "bin/production/headers",
                    "-classpath", "bin/production",
                    "-bootclasspath", "${env:JAVA_HOME}/jre/lib/rt.jar",
                    "-sourcepath", "src",
                    "-source", "1.6",
                    "-target", "1.6",
                    "src/sk/pa3kc/*.java",
                    "src/sk/pa3kc/http/*.java",
                    "src/sk/pa3kc/http/constants/*.java"
                ]
            },
            "dependsOn": [
                "extract jars"
            ],
            "problemMatcher": []
        },
        {
            "label": "create jar",
            "type": "shell",
            "command": "jar",
            "windows": {
                "args": [
                   "-cfve",
                   "bin\\HTTPServer.jar",
                   "sk.pa3kc.Program",
                   "-C", "bin\\production", ".",
                   "-C", ".", "assets"
                ]
            },
            "linux": {
                "args": [
                    "-cfve",
                    "bin/HTTPServer.jar",
                    "sk.pa3kc.Program",
                    "-C", "bin/production", ".",
                    "-C", ".", "assets"
                ]
            },
            "dependsOn": [
                "build project"
            ],
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": true
            }
        }
    ]
}
